---
title: "Flights and Airports Report"
author: "Fadumo Hussein"
date: "2023-02-13"
output:
  html_document:
    toc: true 
    toc_depth: 3
    toc_float: true
    theme: cosmo
    code_folding: show
---

## WORKSPACE PREP

* Data source:  

[Kaggle](https://www.kaggle.com/datasets/tylerx/flights-and-airports-data?resource=download&select=flights.csv)

## Load packages 
```{r, message=FALSE} 
library(tidyverse)
```
```{r, echo=FALSE}
#Loading the package tidyverse to rstudio 
```

## Read in data
* `flights.csv` 
* `airports.csv`
```{r, message=FALSE} 
flights <- read.csv("flights.csv")
airports <- read.csv("airports.csv")
```

```{r, echo=FALSE}
#Reading in the data flights and airports from my files
```
## Datasets

_**Flights**_

A dataset with information about individual flights including: `DayofMonth`, `DayofWeek`, `Carrier`, `OriginAirportID`, `DestAirportID`, `DepDelay`, `ArrDelay`

```{r}
head(flights)
```

```{r, echo=FALSE}
#Loading the first six rows of flights
```
_**Airports**_

A dataset with the `airport_id`, `city`, `state`, and `name` for 365 airports
```{r}
head(airports)
```

```{r, echo=FALSE}
#Loading the first six rows of airports
```
## REPORT OBJECTIVES 
1. Determine how many airports are in New York, New Jersey, and Connecticut (the tri-state area). 
2. Visualize the average arrival and departure delays at each airport identified in Objective 1. 
3. Analyze which carriers have the most and least departure and arrival delays. 

## Objective 1
**Determine how many airports are in New York, New Jersey, and Connecticut (the tri-state area). **
```{r}
tristate_airports <- filter(airports, 
                              state == 'NY' | 
                              state == 'NJ' | 
                              state == 'CT')

n_distinct(tristate_airports$airport_id)
```

```{r, echo=FALSE}
#In the airports data set, we are using the filter function to select airports from the states of New York, New Jersey, and Connecticut to create a new data set, tristate_airports. Then we are counting the number of distinct airport_ids from the tristate_airports data set
```

> In the states of NY, NJ, and CT, there are a combined **19** airports.

## Objective 2  
**Visualize the average arrival and departure delays at each airport identified in Objective 1**
```{r}
flights <- flights %>%
  pivot_longer(cols = c('DepDelay', 'ArrDelay'), names_to = 'delay_type', values_to = 'delay_min')

head(flights)
```

```{r, echo=FALSE}
#We are pivoting longer to make the columns 'DepDelay', 'ArrDelay' into one ( 'delay_type' ) and using the values from  'DepDelay', 'ArrDelay' to create a new column called  'delay_min'
```


```{r}
colors = c(ArrDelay = '#a8dadc', DepDelay = '#219ebc')

p <- ggplot(flights, aes(delay_type, delay_min, fill = delay_type)) +
  geom_bar(position = 'dodge2', stat = 'summary', fun = 'mean') + 
  scale_fill_manual(values = colors) +
  ylab('Minutes') +
  xlab('Delay Type') +
  labs(
    title = "Average Delay by Departure and Arrival"
  ) + theme_minimal() +
  theme(panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        panel.background = element_blank(),
        legend.position="none") +
  coord_flip(ylim = c(0, 10))

p 
```

```{r, echo=FALSE}
# =The columns are different hex codes. The next layer of this bar graph takes the data from flights, using x axis delay_type and the y axis as delay_min. The columsn are filled in by delay_type. Then the graph is labeled and then a theme is selected.
```

<center>
 ![](airplane.png)
</center>
<center>
thank you
</center>